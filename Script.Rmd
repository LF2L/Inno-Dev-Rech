---
title: "Script"
author: "Name of the Student"
output: html_document
subtitle: "This is a subtitle"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

#libraries
#devtools::install_github( "ThinkR-open/prenoms")
library("prenoms")

```

# But du Workshop:

Le but principales est la comprendre la  reproducibilité des résulstats dans la recherche scientific.

>Nous allons reprendre plusieurs éléments de base du langage **R**. 
Une bonne compréhension des bases du langage, bien qu'un peu ardue de prime abord, permet de comprendre le sens des commandes qu'on utilise et de pleinement exploiter la puissance que **R** offre en matière de manipulation de données.



# Bases de la programmation R
## Fonctions & Objets

Résumé des elements importants 

1. Les vecteurs sont l’un des objets de base de R et correspondent à une liste de valeurs. Leurs propriétés fondamentales sont :

1. Clasess:
  - Numerical, Character, Integer or Logical
2. Objects
  - Vectors, Lists, Data frames,  Factors, Missing values.
3. Operations
  - Subsetting, Logical subsetting
  
### Variables
```{r Ex_1}
# Définition d'une variable type 'numerique' 
a_int <- 20
b_int <- 30
```

```{r Ex_2}
# Définition d'une variable type 'Entier' 
a_int <- 20L
b_int <- 30L
```


```{r Ex_3}
# Définition d'une variable type 'Logical' (Valeur Entier)
a_log <- TRUE
b_log <- FALSE
```


```{r Ex_4}
# Définition d'une variable type 'character' (texte)
a_char <- "Bonjour"
b_char <- "Comment ça va?" 

```

### Vecteur

La fonction `c()` ('*combination fonction*') permet de creer de vecteur:

```{r Ex_5}
# Faire un vecteur de longitud 5.
etudiants <- c("Maelle", "Luca", "Sandrine", "Marcelo", "Jean")
taille  <-  c(188, 173, 187, 164, 178)
age <- c(32, 23, 35, 35, 54)
```

- Determinez:
  - Age moyenne des des étudiants dans la variable `moyenne_global`.
  - Longueur du vecteur étudiants. (voir `?length`)


```{r Ex_6}

# moyenne_global <- ....

# total_etu <- ...

```

Lé résultat de la somme est:  **`r moyenne_global`**.
La totalité des étudiantes est: **`r moyenne_global`**
  



### List

- Faites unu liste avec les vecteurs que vous avez fait dans l'exercise précedente

```{r Ex_7}
# Creation d'une List
v1 <- c("Maelle", "Luca", "Sandrine", "Marcelo", "Jean")
v2  <-  c(188, 173, 187, 164, 178)
v3 <- c(32, 23, 35, 35, 54)

a_list <- list(etudiant = v1,
               taille = v2,
               age = v3 )
a_list

```

### Data frames

- Pourquoi le data.frame suivant marque un erreur?. Faites la correction necessaire.

```{r Ex_8}
#etudiants <- c("Maelle", "Luca", "Sandrine", "Marcelo", "Jean")
#taille  <-  rnorm(8, mean = 173, sd = 5 )

#a_dataframe <-  data.frame(etudiants, taille)

```


- Seleccionez la colonne `Species`  du data.frame `iris`, et trouvez les valeurs minimal, maximal, moyenne de la colonne `Sepal.Length`.

```{r Ex_9}
data <- iris$Sepal.Length
```


---

**Take a rest of 5 Min**

---


# Bases de la visualisation de données

A retenir de ce module:

1. Créer des graphiques avec un **modèle** (ou **template**) {ggplot2} réutilisable
1. Ajouter des variables à un graphique avec **aesthetics**
1. Sélectionner le "type" de votre graphique avec **geoms** 


- Faites un nuages de points avec les variables `Sepal.Length` et `Sepal.Width` du data.frame `iris` en faisant la distintion des couleur pour chaque spèce de fleur.

```{r Ex_10}
# ggplot(data = <DATA>) + 
#   aes(x = <X>, y = <Y>)
#  <GEOM_FUNCTION>()

ggplot(data = iris) +
  aes(x = Sepal.Length, y = Sepal.Width, color = Species) +
  geom_point()
```


- Faites un boxplot avec memes variables `Sepal.Length` et `Sepal.Width` du data.frame `iris` en faisanat la distaintion des coulor pour chaque Spece de fleur.


```{r Ex_11}
# ggplot(data = <DATA>) + 
#   aes(x = <X>, y = <Y>)
#  <GEOM_FUNCTION>()

ggplot(data = iris) +
  aes(x = Sepal.Length, y = Sepal.Width, color = Species) +
  geom_boxplot()
```



- Pouvez-vous ajouter les titres, et labels dans le dernièr graphique? (regardez `?labs`)
 

```{r Ex_12}

```



# Tidyverse

## Import Data

`readr` et `readxl` permettent d’importer des données tabulaires depuis des fichiers texte ou Excel.
Une interface intégrée à RStudio facilite leur usage en permettant de modifier les options d’importation et d’avoir un aperçu en temps réel.

```{r}
# Load the library
library(tidyverse)
```


-  Lire une base de donnes CSV:
```{r}
data.csv <- read_csv("data/data-twitter-article.csv")
data.csv
```

- Lire un fichier EXCEL

```{r}
# Lire un base de donnes Excel
library(readxl)

data.excel <- read_excel("data/Test_Attrakdiff.xls" ) # Don't show up

#identifying the onglets
onglets <- excel_sheets("data/Test_Attrakdiff.xls")


# Reading the onglet that corresponds
data.excel <- read_excel("data/Test_Attrakdiff.xls",  sheet = onglets[2]) 


# Reading the onglet that corresponds
data.excel <- read_excel("data/Test_Attrakdiff.xls",  
                         sheet = onglets[2], 
                         skip = ) 



```

-  Lire les onglets dans le fichier Excel

```{r atractif}

# Lire un onglet d'excel ---> Il faut savoir quel's sont les onglets du document
onglets <- excel_sheets("data/deaths.xlsx")
data.excel.onglets <- read_excel("data/deaths.xlsx", sheet = onglets[1] )
data.excel.onglets <- read_excel("data/deaths.xlsx", sheet = onglets[1], skip = 4 )
data.excel.onglets <- read_excel("data/deaths.xlsx", sheet = onglets[1], skip = 4 )


```

## Export de tableaux de données

On peut avoir besoin d’exporter un tableau de données dans R vers un fichier dans différents formats. La plupart des fonctions d’import disposent d’un équivalent permettant l’export de données. On citera notamment :

- `write_csv`, `write_csv2` permettent d’enregistrer un data frame ou un tibble dans un fichier au format texte délimité

```{r}
# Exporté des donnes

# With csv et csv2
write_csv(data.csv, file= "data/export-csv.csv")
write_csv2(data.csv, file= "data/export-csv2.csv")

```


## Tidy

Les principes d’un jeu de données tidy sont les suivants :

- chaque variable est une colonne
- chaque observation est une ligne
- chaque type d’observation est dans une table différente



Prenons un exemple avec VOS données de l'experimentation, qui indique la population de trois pays pour quatre années différentes :

```{r }
# Data in 'NON tidy' form

 data.non.tidy <- read_csv(dm, file = "data/non-tidy.csv")
```




# Attractif

```{r}
read_excel
```


# Final Exercise

## Gapminder challenge


- Inspired by the late, great [Hans Rosling](https://www.youtube.com/watch?v=jbkSRLYSojo)


Install and load the [`gapminder` data package](https://github.com/jennybc/gapminder)

```{r, eval=FALSE, echo=TRUE, include=TRUE}
install.packages("gapminder")
library(gapminder)
gapminder
```


Pick at least __two__ of the tasks below from the task menu and approach each with a table and figure. 

  * `dplyr` should be your main data manipulation tool
  * `ggplot2` should be your main visualization tool

## Tasks menu {-}

* The mean life expectancy across all years for France?

* Get the maximum and minimum of GDP per capita for all continents.

* Look at the spread of GDP per capita across countries within the continents.

* How does life expectancy vary across different continents? (Using a `ggplot`)




* Report the absolute and/or relative abundance of countries with low life expectancy over time by continent: Compute some measure of worldwide life expectancy - you decide - a mean or median or some other quantile or perhaps your current age. Then determine how many countries on each continent have a life expectancy less than this benchmark, for each year.

* Make up your own! 


---


You're encouraged to reflect on what was hard/easy, problems you solved, helpful tutorials you read, etc.








 
